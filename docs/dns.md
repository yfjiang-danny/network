# DNS

## 什么是 DNS？

域名系统 (DNS) 是互联网的电话簿。人们通过例如 nytimes.com 或 espn.com 等域名在线访问信息。Web 浏览器通过 互联网协议 （IP） 地址进行交互。DNS 将域名转换为 IP 地址，以便浏览器能够加载互联网资源。

连接到 Internet 的每个设备都有一个唯一 IP 地址，其他计算机可使用该 IP 地址查找此设备。DNS 服务器使人们无需存储例如 192.168.1.1（IPv4 中）等 IP 地址或更复杂的较新字母数字 IP 地址，例如 2400:cb00:2048:1::c629:d7a2（IPv6 中）。

## DNS 如何工作？

**加载网页涉及 4 个 DNS 服务器**

- **DNS 解析器** - DNS 解析器（DNS Resolver），也被称作 DNS 客户端，是域名系统（DNS）中的一个关键组件。它负责将人类可读的域名（比如 www.example.com）转换成计算机能够理解的IP地址。DNS解析器通常由你的互联网服务提供商（ISP）（电信、联通、移动）提供，负责找到与给定域名关联的IP地址。DNS 解析器本身可以根据权威性 DNS 服务器返回的信息缓存 IP 地址，缓存时间由权威性 DNS 服务器返回的 TTL 信息决定，以保证 DNS 信息的正确性。
- **根域名服务器** - 根域名服务器是域名系统（DNS）层次结构中的顶层服务器，负责存储域名系统的根区域信息。根域名服务器的作用是响应针对顶级域名（TLD）的 DNS 查询，并提供 TLD 服务器的 IP 地址。根域名服务器的地址是固定的，全球使用一组 13 台根域名服务器。
- **TLD 名称服务器** —— TLD 服务器是域名系统（DNS）中的服务器，负责存储和管理顶级域名（TLD）的 DNS 记录。例如，".com"、".org"、".net"等。每个 TLD 都有自己的 TLD 服务器。
- **权威性域名服务器** - 负责存储特定域名的所有 DNS 记录，并对这些域名的查询提供权威答复。包括但不限于 A 记录（IP 地址）、AAAA 记录（IPv6 地址）、MX 记录（邮件交换）、CNAME 记录（规范名称）等。

**DNS 查找的 8 个步骤**:

1. 用户在 Web 浏览器中键入 “example.com”，查询传输到 Internet 中，并被 DNS 递归解析器接收。
2. 接着，解析器查询 DNS 根域名服务器（.）。
3. 然后，根服务器使用存储其域信息的顶级域（TLD）DNS 服务器（例如 .com 或 .net）的地址响应该解析器。在搜索 example.com 时，我们的请求指向 .com TLD。
4. 然后，解析器向 .com TLD 发出请求。
5. TLD 服务器随后使用该域的域名服务器 example.com 的 IP 地址进行响应。
6. 最后，递归解析器将查询发送到域的域名服务器。
7. example.com 的 IP 地址而后从域名服务器返回解析器。
8. 然后 DNS 解析器使用最初请求的域的 IP 地址响应 Web 浏览器。
   DNS 查找的这 8 个步骤返回 example.com 的 IP 地址后，浏览器便能发出对该网页的请求：

9. 浏览器向该 IP 地址发出 HTTP 请求。
10. 位于该 IP 的服务器返回将在浏览器中呈现的网页（第 10 步）。
    ![](../assets/what_is_a_dns_server_dns_lookup.png)
